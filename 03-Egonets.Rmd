# (PART) Part 2 EGONETS {-} 

# Theory  


```{r colorize, echo=FALSE}
colorize <- function(x, color) {
  if (knitr::is_latex_output()) {
    sprintf("\\textcolor{%s}{%s}", color, x)
  } else if (knitr::is_html_output()) {
    sprintf("<span style='color: %s;'>%s</span>", color,
      x)
  } else x
}
```

```{r emotions, echo=FALSE, message=FALSE}
# install.packages("devtools")
#devtools::install_github("hadley/emo")
require(emo)
#emo::ji_find("affection")
#emo::ji("beaming face with smiling eyes")
#jis
```

We already introduced egonets in section \@ref(types). We defined an egonet as the **set of ties surrounding sampled individual units.** [cf. @marsden1990]. Thus we have an ego with ties to one or more alters. If we also know the ties between our alters we may observe triads. In the figure below I have made the `r colorize("triad green", "green")`.   


```{r, echo=FALSE, fig.cap="A Triad within an egonet", message=FALSE}
require(igraph)
set.seed(34676)
degs <- sample(1:5, 100, replace=TRUE)
if (sum(degs) %% 2 != 0) { degs[1] <- degs[1] + 1 }
g4 <- sample_degseq(degs, method="vl")
g4 <- simplify(g4)
edges <- get.adjacency(g4)
edges_mat <- matrix(as.numeric(edges), nrow=nrow(edges))
edges_mat[4,24] <- 1

set.seed(37676)
l4 <- layout.kamada.kawai(g4)
g4 <- graph_from_adjacency_matrix(edges_mat, mode = "undirected")
#changing V
V(g4)$label=""
V(g4)$color <- "blue"
#changing E
E(g4)$arrow.size=.4
E(g4)$curved=.3
E(g4)$color="black"
#plot(g4, layout=l4, margin=0,)

V(g4)$color[96]="red"
V(g4)$shape="circle"
V(g4)$shape[96]="square"
#plot(g4, layout=l4)

l5 <- l4
l5[,1] <- l5[,1] - 1.5
l5[,2] <- l5[,2] - .25
l5 <- l5 / 1.6
#plot(g4, layout=l5, rescale=F)


edges_mat[c(1:100)[-96], c(1:100)[-96]] <- 0
noisolates <- rowSums(edges_mat, na.rm=T)>0

#same appearance
g5 <- graph_from_adjacency_matrix(edges_mat[noisolates,noisolates], mode = "undirected")
V(g5)$label=""
V(g5)$color <- V(g4)$color[noisolates]
E(g5)$arrow.size=.4
E(g5)$curved=.3
E(g5)$color="black"
V(g5)$shape <- V(g4)$shape[noisolates]
#plot(g5, layout=l5[noisolates,], rescale=F)

edges <- get.adjacency(g4)
edges_mat <- matrix(as.numeric(edges), nrow=nrow(edges))
edges_mat[4,24] <- 1
connected <- adjacent_vertices(g4, 96)
subnet <- c(96, as.numeric(unlist(connected)))

g6 <- graph_from_adjacency_matrix(edges_mat[subnet,subnet], mode = "undirected")

#same appearance
V(g6)$label=""
V(g6)$color <- V(g4)$color[subnet]
E(g6)$arrow.size=c(.4, 1.6,1.6,0.4,1.6)
E(g6)$width <- c(.4, 6,6,0.4,6)
E(g6)$curved=0.3
E(g6)$color=c("black","green","green","black","green")
V(g6)$shape <- V(g4)$shape[subnet]
plot(g6,layout=l5[subnet,], rescale=F)
```
Let us discuss this important network structure in some more detail first, before we move on with our discussion on Egonets. 

## Network Structures (TRIAD) {#triad}

Let us start with all possible triad configurations if we have a (binary) undirected tie. See Figure \@ref(fig:ut).


```{r ut, echo=FALSE, , eval=TRUE, fig.cap="undirected triad configurations", out.width = '30%'}
knitr::include_graphics("slide7.png")
```



We observe an *unconnected* triad, a triad with a *connected pair*, an *open triad* and a *closed triad*. The open triad is also called a 'forbidden triad' and actor *i* in such a triad is said to hold a 'brokerage position'.

>How many isomorphs can you think of for a triad with one *connected pair*?  

We only have three nodes but network structures become complex quite quickly. See Figure @\ref(mut) for the many possible configurations for triads when we consider two different type of undirected ties (i.e. multiplexity). 

```{r mut, echo=FALSE, , eval=TRUE, fig.cap="Multiplex, undirected triad configurations", out.width = '100%'}
knitr::include_graphics("slide8.png")
```


By now, I am a bit tired of drawing all these nodes and relations. Luckily, the net is full of pictures of the possible directed triad configurations. I stole this one from an online workshop on Social Network Analysis for Anthropologists [here](https://eehh-stanford.github.io/SNA-workshop/).

```{r dt, echo=FALSE, , eval=TRUE, fig.cap="Directed triad configurations", out.width = '100%'}
knitr::include_graphics("new-triad-census.png")
```

These triads all have unique names: 

* last digit: number of dyads without ties  
* second digit: number of dyads with one tie  
* first digit: number of dyads with two ties (mutual dyads)  
* specific subtype:  
  - C:  
  - D:  
  - U:  
  - T: .

This triad census has been developed by @davis1967 and their original picture in the paper is too cool not to show here:

```{r , echo=FALSE, , eval=TRUE, fig.cap="Original Triad census by Davis and Leinhard (1967)", out.width = '50%'}
knitr::include_graphics("Capture.png")
```


I could not find a nice picture of all possible directed triad configurations for two relations simultaneously. If you have time on your hands, please make one for me! `r emo::ji("grinning")` 

So, let us move on to egonets. 


## Causes  

## Consequences  

---  


# Methods  


## Before you start  

## Causes  

### Aggregation  

### Disaggregation  

### Micro-macro Model  

#### Multi-level framework  

#### SEM 


## Consequences  

### Macro-micro model  

#### Multi-level framework  

#### SEM 

### Micro-macro-RI-CLPM  



---  

# Data  

## Sampling  

## Ethical considerations  

## Measurement  

---  
